# 4.python数据容器

## 4.1数据容器

> 一种可以容纳多份数据的数据类型，容纳的每一份数据称之为1个元素

- 每一个元素可以是任意类型的数据，如字符串、数字、布尔等
- 根据特点的不同可分为5类：列表(list)、元组(tuple)、字符串(str)、集合(set)、字典(dict)

## 4.2列表（list）

> 列表内的每一个数据，称之为元素，类似C数组a[ ]

### 4.2.1基本格式

- 列表中每一个元素之间用逗号隔开
- 可以一次存储多个不同数据类型的数据，支持嵌套

```python
my_list_1 = ["观止", 20, True, ["guanzhi", 20]]
my_list_2 = ["观止", 20, True]
print(my_list_2)
print(type(my_list_1))
# 输出
# ['观止', 20, True]
# <class 'list'>
```

### 4.2.2列表的下引（索引）

> 可以使用下标索引从列表中取出特点位置的数据

- 要注意下标索引的取值范围，超出范围无法取出元素，并且会报错

（1）正向索引

- 从前向后的方向，从0开始，依次递增

```python
# 语法： 列表[下标索引]
my_list = ["李白", "章北海", "杜甫"]
print(my_list[0]) # 打印 李白
print(my_list[1]) # 打印 章北海
print(my_list[2]) # 打印 杜甫
```

（2）反向索引

- 从后向前的方向，从-1开始，依次递减（-1，-2，-3）

```python
my_list = ["李白", "章北海", "杜甫"]
print(my_list[-1]) # 打印 杜甫
print(my_list[-2]) # 打印 章北海
print(my_list[-3]) # 打印 李白
```

（3）嵌套列表的索引

- 同样支持下标索引，且用法与上述相似

```python
# 语法： 列表[外层列表下标索引][内层列表下标索引]
my_list = [["李白", "章北海"], ["罗辑", "杜甫"]]
print(my_list[0][0]) # 打印 李白
print(my_list[0][1]) # 打印 章北海
print(my_list[1][0]) # 打印 罗辑
print(my_list[1][1]) # 打印 杜甫
```

### 4.2.3列表的常用操作

> 如果将函数定义为class（类）的成员，那么函数称之为方法

| 使用方式                | 作用                                          |
| ----------------------- | --------------------------------------------- |
| 列表.append(元素)       | 向列表中追加一个元素                          |
| 列表.extend(容器)       | 将数据容器的内容依次取出，追加到列表尾部      |
| 列表.insert(下标, 元素) | 在指定下标处，插入指定的元素                  |
| 列表.pop(下标)          | 删除列表指定下标元素                          |
| 列表.remove(元素)       | 从前向后，删除此元素第一个匹配项              |
| 列表.clear()            | 清空列表                                      |
| 列表.count(元素)        | 统计此元素在列表中出现的次数                  |
| 列表.index(元素)        | 查找指定元素在列表的下标 找不到报错ValueError |
| del 列表[下标]          | 删除列表指定下标元素                          |
| len(列表)               | 统计容器内有多少元素                          |

**（1）查询元素**

> 查找指定元素在列表的下标

- 列表.index(元素)

```python
my_list = ["李白", "章北海", "罗辑", "杜甫"]
print(my_list.index("罗辑")) # 打印 2
print(my_list.index("筠青")) # 打印 ValueError: '筠青' is not in list
```

**（2）修改元素**

> 修改特定位置（索引）的元素值，替换

- 列表[下标] = 值

```python
my_list = ["李白", "章北海", "罗辑", "杜甫"]
my_list[0] = "观止"
my_list[-1] = "study"
print(my_list) # 打印 ['观止', '章北海', '罗辑', 'study']
```

**（3）插入元素**

> 在指定的下标位置插入指定的元素，并非替换

- 列表.insert(下标, 元素)

```python
my_list = ["李白", "章北海", "罗辑"]
my_list.insert(1, "观止")
print(my_list) # 打印 ['李白', '观止', '章北海', '罗辑']
```

**（4）追加元素**

> 将指定元素追加到列表的尾部

- 列表.append(元素)

```python
my_list = ["李白", "章北海", "罗辑"]
my_list.append("观止")
print(my_list) # 打印 ['李白', '章北海', '罗辑', '观止']
```

- 列表.extend(其它数据容器)

```python
my_list_1 = ["李白", "章北海"]
my_list_2 = ["罗辑", "观止"]
my_list_1.extend(my_list_2)
print(my_list_1) # 打印 ['李白', '章北海', '罗辑', '观止']
```

**（5）删除元素**

- del 列表[下标]

```python
my_list = ["李白", "章北海", "罗辑"]
del my_list[0]
print(my_list) # 打印 ['章北海', '罗辑']
```

- 列表.pop(下标)

```python
my_list = ["李白", "章北海", "罗辑"]
my_list.pop(0)
print(my_list) # 打印 ['章北海', '罗辑']
# my_list.pop是有返回值的
```

- 列表.remove(元素)

```python
my_list = ["李白", "章北海", "罗辑", "李白"]
my_list.remove("李白")
print(my_list) # 打印 ['章北海', '罗辑', '李白']
```

**（6）清空列表内容**

- 列表.clear()

```python
my_list = ["李白", "章北海", "罗辑"]
my_list.clear()
print(my_list) # 打印 []
```

**（7）统计某元素在列表内的数量**

- 列表.count(元素)

```python
my_list = ["李白", "章北海", "罗辑", "李白"]
num = my_list.count("李白")
print(num) # 打印 2
```

**（8）统计列表内有多少元素**

- len(列表)

```python
my_list = ["李白", "章北海", "罗辑", "李白"]
print(len(my_list)) # 打印 4
```

### 4.2.4列表的遍历

> 将容器内的元素依次取出进行处理的行为，亦称迭代

- 可以使用循环遍历列表的元素
- 通过列表[下标]的方式在循环中取出列表的元素
- 循环条件为 下标值 < 列表的元素数量

（1）while循环遍历

```python
my_list = [1,2,3,4]
index = 0
while index < len(my_list):
    num = my_list[index]
    print(num)
    index += 1 
# 输出
# 1
# 2
# 3
# 4
```

（2）for循环遍历

```python
my_list = [1, 2, 3, 4]
for x in my_list:
    print(x)
# 输出
# 1
# 2
# 3
# 4
```

（3）for和while对比

- 在使用场景上：
  - while循环适用于<u>任何</u>想要循环的场景
  - for循环适用于，<u>遍历数据容器的场景</u>或<u>简单的固定次数循环场景</u>

- 在循环控制上：
  - while循环可以自定循环条件，并自行控制
  - for循环不可以自定循环条件，只可以一个个从容器内取出数据

- 在无限循环上：
  - while循环可以通过条件控制做到无限循环
  - for循环理论上不可以，因为被遍历的容器容量不是无限的

## 4.3元组（tuple）

> 元组同列表一样，但一旦定义完成，就不可修改

### 4.3.1基本格式

- 多数特性和列表（list）一致，不同点在于**不可修改**的特性
- 数据是有序存储且允许重复数据存在，故可以与列表一样使用for与while循环遍历

```py
# 定义元组
变量名称 = (元素1, 元素2, 元素3, 元素4, 元素5)
# 定义只有一个元素的元组
变量名称 = (元素1,)
# 定义空元组
变量名称 = ()
变量名称 = tuple()
```

- 基本元组

```python
my_tuple_1 = ("观止", 20, True, ("guanzhi", 20))
my_tuple_2 = ("观止", 20, True)
print(my_tuple_2)
print(type(my_tuple_1))
# 输出
# ('观止', 20, True)
# <class 'tuple'>
```

- 单数据元组

```python
my_tuple = ("观止")
print(type(my_tuple)) # 打印 <class 'str'>
my_tuple = ("观止",)
print(type(my_tuple))  # 打印 <class 'tuple'>
```

- 嵌套元组

```python
# 获取值方式与列表一致
my_tuple = ((1, 2, 3), (4, 5, 6))
print(my_tuple[0][0]) # 打印 1
```

### 4.3.2元组的常用操作

> 元组由于不可修改的特性，所以其操作方法非常少

| 方法             | 作用                                               |
| ---------------- | -------------------------------------------------- |
| 元组.index(元素) | 查找某个数据，如果数据存在返回对应的下标，否则报错 |
| 元组.count(元素) | 统计某个数据在当前元组出现的次数                   |
| len(元组)        | 统计元组内的元素个数                               |

（1）查询元素

- 根据下标(索引)取出数据：元组[下标索引]

```python
my_tuple = ("观止", True, 20)
print(my_tuple[0])  # 打印 观止
```

-  查找特定元素的第一个匹配项：元组.index(元素)

```python
my_tuple = ("观止", True, "观止")
print(my_tuple.index("观止"))  # 打印 0
```

（2）统计操作

- 统计某个数据在元组内出现次数：元组.count(元素)

```python
my_tuple = ("观止", True, "观止")
print(my_tuple.count("观止"))  # 打印 2
```

- 统计元组内元素个数：len(元组)

```python
my_tuple = ("观止", True, "观止")
print(len(my_tuple))  # 打印 3
```

（3）注意事项

- 不可以修改元组的内容，否则会直接报错

```python
my_tuple = (1, True, "观止")
my_tuple[0] = 5 # 报错 'tuple' object does not support item assignment
```

- 可以修改元组内的list的内容（修改元素、增加、删除、反转等）

```python
my_tuple = (1, True, [2, 3, 4])
my_tuple[2][0] = 5
print(my_tuple) # 打印 (1, True, [5, 3, 4])
```

- 不可以替换list为其它list或其它类型

```python
my_tuple = (1, True, [2, 3, 4])
my_tuple[2] = [1, 2, 3] # 报错
```

## 4.4字符串（str）

> 字符串是字符的容器，一个字符串可以存放任意数量的字符

### 4.4.1基本格式

- 同元组一样,字符串是一个**无法修改**的数据容器
- 同列表、元组一样，字符串也可以通过下标进行访问，故而支持while和for循环遍历

```python
name = "guanzhi"
print(name[0])  # 打印 g
print(name[-1])  # 打印 i
```

### 4.4.2字符串的常用操作

| 操作                                | 说明                                                         |
| ----------------------------------- | ------------------------------------------------------------ |
| 字符串[下标]                        | 根据下标索引取出特定位置字符                                 |
| 字符串.index(字符串）               | 查找给定字符的第一个匹配项的下标                             |
| 字符串.replace(字符串1, 字符串2)    | 将字符串内的全部字符串1，替换为字符串2 不会修改原字符串，而是得到一个新的 |
| 字符串.split(字符串)                | 按照给定字符串，对字符串进行分隔 不会修改原字符串，而是得到一个新的列表 |
| 字符串.strip() 字符串.strip(字符串) | 移除首尾的空格和换行符或指定字符串                           |
| 字符串.count(字符串)                | 统计字符串内某字符串的出现次数                               |
| len(字符串)                         | 统计字符串的字符个数                                         |

（1）查找元素

- 查找特定字符串的下标索引值：字符串.index(字符串)

```py
name = "guanzhi"
print(name.index("a"))  # 打印 2
```

（2）替换元素

- 将字符串1，替换为字符串2：字符串.replace(字符串1，字符串2）

- 不是修改字符串本身，而是得到了一个新字符串

```python
name = "guanzhi"
new_name = name.replace("guan", "study")
print(name)  # 打印 guanzhi
print(new_name)  # 打印 studyzhi
```

（3）分割元素

- 按照指定的分隔符字符串，将字符串划分为多个字符串，<u>并存入列表对象中</u>：字符串.split(分隔符字符串）
- 字符串本身不变，而是得到了一个列表对象

```py
name = "guanzhi,study,20"
new_list = name.split(",")
print(name)  # 打印 guanzhi,study,20
print(new_list)  # 打印 ['guanzhi', 'study', '20']
print(type(new_list))  # 打印 <class 'list'>
# 字符串按照给定的,进行了分割，变成多个子字符串，并存入一个列表对象中
```

（4）规整操作

> 字符串本身不变，而是得到了一个新字符串

- 去前后空格以及换行符：字符串.strip()

```python
name = "  guanzhi  "
new_name = name.strip()
print(new_name)  # 打印 guanzhi
```

- 去前后指定字符串：字符串.strip(字符串)

```python
name = "20guanzhi20"
new_name = name.strip("20")
print(name)  # 打印 20guanzhi20
print(new_name)  # 打印 guanzhi
```

（5）统计操作

> 数字（1、2、3…），字母（abcd、ABCD等），符号（空格、!、@、#、$等），中文均算作1个字符

- 统计字符串中某字符串的出现次数：字符串.count(字符串)

```python
name = "20guanzhi20"
print(name.count("20"))  # 打印 2
```

- 统计字符串的长度：len(字符串)

```python
name = "20guanzhi 20"
print(len(name))  # 打印 12
```

### 4.4.3字符串大小比较

- 在程序中，字符串所用的所有字符如：大小写，英文单词，数字特殊符号(!、\、|、@、#、空格等），都有其对应的ASCII码表值；每一个字符都能对应上一个：<u>数字的码值，字符串进行比较就是基于数字的码值大小进行比较的</u>

- 字符串是按位比较，也就是一位位进行对比，只要有一位大，那么整体就大

```python
print(f"a 大于 A，结果：{'a'>'A'}")
# 输出 True
```

## 4.5数据容器（序列）的切片

> 序列：内容连续、有序，可使用下标索引的一类数据容器
> 切片：从一个序列中，取出一个子序列

- 序列的典型特征就是：<u>有序并可用下标索引</u>，<u>字符串、元组、列表</u>均满足这个要求

### 4.5.1基本格式

> 语法：序列[起始下标:结束下标:步长]
> (表示从序列中，从指定位置开始，依次取出元素，到指定位置结束，得到一个新序列)

- **起始下标**表示从何处开始，可以留空，留空视作从头开始
- **结束下标**（不含）表示何处结束，可以留空，留空视作截取到结尾
- **步长**表示，依次取元素的间隔
  - 步长为负数表示，反向取<u>（注意，起始下标和结束下标也要反向标记）</u>

### 4.5.2基本用法

- 正向取

```python
my_list = [1, 2, 3, 4, 5]
new_list = my_list[1:4]  # 下标1开始，下标4（不含）结束，步长1
print(new_list)  # 结果：[2, 3, 4]
```

```python
my_tuple = (1, 2, 3, 4, 5)
new_tuple = my_tuple[:]  # 从头开始，到最后结束，步长1
print(new_tuple)  # 结果：(1, 2, 3, 4, 5)
```

- 反向取

```python
my_list = [1, 2, 3, 4, 5]
new_list = my_list[3:1:-1]  # 从下标3开始，到下标1（不含）结束，步长-1（倒序）
print(new_list)  # 打印 [4, 3]
```

## 4.6集合（set）

> 不支持元素的重复（自带去重功能），并且内容无序

### 4.6.1基本格式

- 数据是**无序存储**的，不支持下标索引，故不能使用while循环遍历
- **不允许重复**数据存在但可以修改元素

```python
# 定义集合
变量名称 = {元素1, 元素2, 元素3, 元素4, 元素5}
# 定义空集合
变量名称 = set()
```

- 去重示例：

```python
my_set = {"观止", True, "观止"}
print(my_set)  # 打印 {True, '观止'}
```

### 4.6.2集合的遍历

- 无法使用while循环遍历，但可以使用for进行循环遍历

```python
my_set = {"观止", True, "观止"}
for i in my_set:
    print(i)
# 打印
# True
# 观止
```

### 4.6.3集合的常用操作

| 操作                           | 说明                                                       |
| ------------------------------ | ---------------------------------------------------------- |
| 集合.add(元素)                 | 集合内添加一个元素                                         |
| 集合.remove(元素)              | 移除集合内指定的元素                                       |
| 集合.pop()                     | 从集合中随机取出一个元素                                   |
| 集合.clear()                   | 将集合清空                                                 |
| 集合1.difference(集合2)        | 得到一个新集合，内含2个集合的差集 原有的2个集合内容不变    |
| 集合1.difference_update(集合2) | 在集合1中，删除集合2中存在的元素 集合1被修改，集合2不变    |
| 集合1.union(集合2)             | 得到1个新集合，内含2个集合的全部元素 原有的2个集合内容不变 |
| len(集合)                      | 得到一个整数，记录了集合的元素数量                         |

（1）增加元素

- 集合本身被修改，将指定元素，添加到集合内：集合.add(元素)

```python
my_set = {"观止", True, "观止"}
my_set.add("study")
print(my_set)  # 打印 {'观止', True, 'study'}
```

（2）移除元素

- 集合本身被修改，将指定元素，从集合内移除：集合.remove(元素)

```python
my_set = {"观止", True, "观止"}
my_set.remove("观止")
print(my_set)  # 打印 {True}
```

- 从集合中随机取出一个元素，同时集合本身被修改，元素被移除：集合.pop()

```python
my_set = {"观止", True}
num = my_set.pop()
print(my_set)  # 打印 {'观止'}
print(num)  # 打印 True
```

- 清空集合,集合本身被清空：集合.clear()

```python
my_set = {"观止", True}
my_set.clear()
print(my_set)  # 打印 set()
```

（3）两集合操作

- 取出集合1和集合2的差集（集合1有而集合2没有的)，<u>得到一个新集合，集合1和集合2不变</u>：集合1.difference(集合2)

```python
my_set_1 = {1, 2}
my_set_2 = {1, 3}
my_set_3 = my_set_1.difference(my_set_2)
print(my_set_1)  # 打印 {1, 2}
print(my_set_2)  # 打印 {1, 3}
print(my_set_3)  # 打印 {2}
```

- 对比集合1和集合2，在集合1内，删除和集合2相同的元素,<u>集合1被修改，集合2不变</u>：集合1.difference_update(集合2)

```python
my_set_1 = {1, 2}
my_set_2 = {1, 3}
my_set_1.difference_update(my_set_2)
print(my_set_1)  # 打印 {2}
print(my_set_2)  # 打印 {1, 3}
```

- 将集合1和集合2<u>组合成新集合(去重)，集合1和集合2不变</u>：集合1.union(集合2)

```python
my_set_1 = {1, 2}
my_set_2 = {1, 3}
my_set_3 = my_set_1.union(my_set_2)
print(my_set_1)  # 打印 {1, 2}
print(my_set_2)  # 打印 {1, 3}
print(my_set_3)  # 打印 {1, 2, 3}
```

（4）集合长度

- 查看集合的元素数量，统计集合内有多少元素：len(集合)

```python
my_set = {1, 3}
print(len(my_set))  # 打印 2
```

## 4.7字典、映射（dict）

> python中字典和生活中字典十分相像

- 可以按照key找到对应的value

### 4.7.1基本格式

- 使用{}存储原始, 每一个元素是一个键值对
- 每一个键值对包含key和value
- key不可重复,重复会对原有数据覆盖; 且key不能是字典

```python
my_dict = {"观止": 99, "李白": 120, "观止": 110}
print(my_dict)  # 打印 {'观止': 110, '李白': 120}
print(type(my_dict))  # 打印  <class 'dict'>
```

### 4.7.2数据的获取

- 字典同集合一样，不可以使用下标索引取值；字典可以通过Key值来取得对应的Value
- 字典的Key和Value可以是任意数据类型（Key不可为字典）,即字典是可以嵌套的
- 字典不支持下标索引，同样不可以用while循环遍历

```python
my_dict = {"李白": 120, "观止": 110}
for name in my_dict:
    print(f"key为：{name},value为：{my_dict[name]}")
# 打印
# key为：李白,value为：120
# key为：观止,value为：110
```

### 4.7.3字典的常用操作

| 操作              | 说明                                          |
| ----------------- | --------------------------------------------- |
| 字典[Key]         | 获取指定Key对应的Value值                      |
| 字典[Key] = Value | 添加或更新键值对                              |
| 字典.pop(Key)     | 取出Key对应的Value并在字典内删除此Key的键值对 |
| 字典.clear()      | 清空字典                                      |
| 字典.keys()       | 获取字典的全部Key，可用于for循环遍历字典      |
| len(字典)         | 计算字典内的元素数量                          |

（1）修改元素，新增元素

- 其实是修改Value，若key不存在则执行新增元素：字典[Key] = Value

```python
my_dict = {"李白": 120, "观止": 110}
my_dict["罗辑"] = 115
print(my_dict)  # 打印 {'李白': 120, '观止': 110, '罗辑': 115}
```

（2）删除元素

- 获得指定Key的Value，同时指定Key的数据被删除：字典.pop(Key)

```python
my_dict = {"李白": 120, "观止": 110}
name = my_dict.pop("李白")
print(name)  # 打印 120
print(my_dict)  # 打印 {'观止': 110}
```

（3）清空字典

- 字典被修改，元素被清空：字典.clear()

```python
my_dict = {"李白": 120, "观止": 110}
my_dict.clear()
print(my_dict)  # 打印 {}
```

（4）获取全部的key

- 得到字典中的全部Key：字典.keys()

```python
my_dict = {"李白": 120, "观止": 110}
my_keys = my_dict.keys()
print(my_keys)  # 打印 dict_keys(['李白', '观止'])
123
```

（5）计算字典内键值对数量

- 得到一个整数，表示字典内元素（键值对）的数量：len(字典)

```python
my_dict = {"李白": 120, "观止": 110}
print(len(my_dict))  # 打印 2
```

## 4.8数据容器对比总结

### 4.8.1简单分类

|          |               列表               |                元组                |       字符串       |          集合          |                       字典                       |
| :------: | :------------------------------: | :--------------------------------: | :----------------: | :--------------------: | :----------------------------------------------: |
| 元素数量 |             支持多个             |              支持多个              |      支持多个      |        支持多个        |                     支持多个                     |
| 元素类型 |               任意               |                任意                |       仅字符       |          任意          | Key：Value Key：除字典外任意类型 Value：任意类型 |
| 下标索引 |               支持               |                支持                |        支持        |         不支持         |                      不支持                      |
| 重复元素 |               支持               |                支持                |        支持        |         不支持         |                      不支持                      |
| 可修改性 |               支持               |               不支持               |       不支持       |          支持          |                       支持                       |
| 数据有序 |                是                |                 是                 |         是         |           否           |                        否                        |
| 使用场景 | 可修改、可重复的一批数据记录场景 | 不可修改、可重复的一批数据记录场景 | 一串字符的记录场景 | 不可重复的数据记录场景 |           以Key检索Value的数据记录场景           |

### 4.8.2通用操作

|             功能             |                      描述                       |
| :--------------------------: | :---------------------------------------------: |
|         通用for循环          |            遍历容器（字典是遍历key）            |
|             max              |                 容器内最大元素                  |
|            min()             |                 容器内最小元素                  |
|            len()             |                  容器元素个数                   |
|            list()            |                   转换为列表                    |
|           tuple()            |                   转换为元组                    |
|            str()             |                  转换为字符串                   |
|            set()             |                   转换为集合                    |
| sorted(序列, [reverse=True]) | 排序，reverse=True表示降序 得到一个排好序的列表 |

- 将给定容器进行排序,排序后都会得到列表（list）对象：sorted(容器, [reverse=True])

```python
my_list = [1, 4, 2]
my_list_asc = sorted(my_list)
print(my_list_asc)  # 结果 [1, 2, 4]
my_list_des = sorted(my_list, reverse=True)
print(my_list_des)  # 结果 [4, 2, 1]
```

