# 7.python模块与包

## 7.1模块

### 7.1.1什么是模块

> 一个Python文件,以.py 结尾,能定义函数,类和变量,也能包含可执行的代码（文件？）

- 作用：我们可以认为不同的模块就是<u>不同工具包</u>,每一个工具包中都有各种不同的工具(如函数)供我们使用进而实现各种不同的功能

### 7.1.2模块的导入

> 模块在使用之前需要先导入正在开发的文件

- 导入语法

```python
[from 模块名] import [模块|类|变量|函数|*] [as 别名]
# *表示导入所有
```

`from 模块名 import 功能名 as 别名`

（1）用法一（导入模块import）

```python
# 导入时间模块         
import time      
print("开始") # 打印 开始   
# 使用time模块中睡眠功能(其中还有众多其他功能)  
# 可以让程序睡眠10秒后再继续执行
time.sleep(10)   
print("结束") #十秒后打印 结束    
```

（2）用法二（从模块中导入某功能from）

```python
# 导入时间模块中的sleep方法
# 只能使用time模块中导入的sleep的方法
from time import sleep
print("开始") # 打印 开始   
# 让程序睡眠10秒后再继续执行
sleep(10)   
print("结束") #十秒后打印 结束   
```

（3）用法三（导入时定义别名as）

```python
# 本名sleep将不可用
from time import sleep as sl
print("开始") # 打印 开始   
# 让程序睡眠10秒后再继续执行
sl(10)   
print("结束") # 十秒后打印 结束   
```

（4）用法四（导入模块的全部功能*）

```python
# 导入时间模块中的全部功能
# 导入效果与(2.1)一致,使用与(2.2)一致
from time import *
print("开始") # 打印 开始   
# 让程序睡眠10秒后再继续执行
sleep(10)   
print("结束") #十秒后打印 结束   
```

- 效果与（1）一致

### 7.1.3自定义模块

- Python中已经帮我们实现了很多的模块，直接导入即可使用

- 有时候我们需要一些`个性化`(满足自己特定需求)的模块, 就可以通过自定义模块实现,即自己制作一个模块
- 上述提到:每个Python文件都可以作为一个模块,<u>模块的名字就是文件的名字</u>.也就是说将自己编写的文件导入另一个文件即可当作模块使用

==（1）if \_\_name__ == '\_\_main__'==

在实际开发中，当一个开发人员编写完一个模块后，为了让模块能够在项目中达到想要的效果，开发人员可能会在在模块文件中添加一些测试信息。此时，无论是当前文件，还是其他已经导入了该模块的文件，在运行的时候都会自动执行测试信息。

```python
# 只在当前文件中运行条件才为True，导入其他文件时均为False
if __name__ == '__main__':
# __main__ 运行时程序的名称
# __name__ 系统自动赋值，不用管
# 在Run时为 __main__ 
# 未Run时为 文件名称
```

- 将测试代码写在（1）下

==（2）导入不同模块的同名功能==

当导入多个模块的时候，如果模块内有同名功能，后面导入的模块将会**覆盖**前面模块内同名的功能

==（3）\_\_all\_\_==

如果一个模块文件中有`__all__`变量，当使用`from xxx import *`导入时，只能导入这个列表中的元素

```python
from test_1 import *
# 导入test_1模块的全部功能
__all__ = ['add']
# 只允许导入功能add
```

## 7.2包

> 当Python的模块太多了，就可能造成一定的混乱，此时可以通过Python包的功能来管理（文件夹？）

### 7.2.1什么是包 Package

- 从物理上看，包就是一个文件夹，在该文件夹下包含了一个 `__init__.py` 文件，该文件夹可用于包含多个模块文件

- 从逻辑上看，包的本质依然是模块
- 当我们的模块文件越来越多时,包可以帮助我们分类管理这些模块,包的作用就是包含多个模块，但本质依然是模块

### 7.2.2自定义包

- 新建包后，包内部会自动创建`__init__.py`文件，这个文件控制着包的导入行为
- 导入包与导入模块几种方式类似，例如：

```python
import 包名.模块名

包名.模块名.功能名()
```

- 可以在`__init__.py`文件中添加`__all__ = ['模块名']`，控制允许导入的模块列表

### 7.2.3安装第三方包

> 第三方(其他人)开发的，Python没有内置，需要先安装才可以导入使用

- 在Python程序的生态中，有非常多的第三方包（非Python官方），可以极大的帮助我们提高开发效率，如：
  - 科学计算中常用的：`numpy包`
  - 数据分析中常用的：`pandas包`
  - 大数据计算中常用的：`pyspark`、`apache-flink包`
  - 图形可视化常用的：`matplotlib`、`pyecharts`
  - 人工智能常用的：`tensorflow`

- 我们可以通过如下命令，让其连接国内的网站进行包的安装：

```python
pip install -i https://pypi.tuna.tsinghua.edu.cn/simple 包名称
# 网站为清华大学提供的一个网站，可供pip程序下载第三方包
```

- 如果经常使用上述方法过于麻烦，可直接配置成镜像源之后就不需要加连接

```python
python -m pip install --upgrade pip
# 升级pip版本，防止版本过低无法配置
pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple
# 配置为全局镜像源
```

